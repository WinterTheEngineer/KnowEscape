{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Dynamic SEO Metadata -->
    <title>{% block title %}Knowescape Consulting | Development through Empowerment{% endblock %}</title>
    <meta name="description" content="{% block description %}Knowescape Consulting, based in Kempton Park, is a business consulting company with a focus on empowering individuals and organizations through consultancy, training, and development.{% endblock %}">

    <meta name="author" content="Rhulani Kgosi Mogotsi">
    <meta name="robots" content="index, follow">
    
    <!-- Canonical: default to current path if request is available -->
    <link rel="canonical" href="https://knowescape.co.za{{ request.path }}">


    <!-- Open Graph -->
    <meta property="og:url" content="{% block og_url %}https://knowescape.co.za{{ request.path }}{% endblock %}">
    <meta property="og:title" content="{% block og_title %}Knowescape Consulting | Skills, Enterprise & Supplier, Startup Support{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Empowering individuals and organizations through consultancy, training, and enterprise development.{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:image" content="{% block og_image %}{% static 'knowescape/images/website-box-bg.jpg' %}{% endblock %}">
    <meta property="og:locale" content="en_ZA">
    <meta property="og:site_name" content="Knowescape Consulting">

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{% block twitter_title %}Knowescape Consulting | Development through Empowerment{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}Empowering individuals and organizations through consultancy, training, and enterprise development.{% endblock %}">
    <meta name="twitter:image" content="{% block twitter_image %}{% static 'knowescape/images/website-box-bg.jpg' %}{% endblock %}">

    <!-- Theme Color -->
    <meta name="theme-color" content="#14201B">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&display=swap" rel="stylesheet">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
          crossorigin="anonymous">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{% static 'knowescape/brand/favicon.png' %}">

    <!-- CSS Styles -->
    {% block page_styles %}{% endblock %}
    <link rel="stylesheet" href="{% static 'knowescape/css/nav.css' %}">
    <link rel="stylesheet" href="{% static 'knowescape/css/footer.css' %}">
    <link rel="stylesheet" href="{% static 'knowescape/css/fonts.css' %}">
    {% block responsive_styles %}{% endblock %}
    <link rel="stylesheet" href="{% static 'knowescape/css/animations.css' %}">

    <!-- Preload critical assets -->
    <link rel="preload" as="image" href="{% static 'knowescape/images/website-box-bg.jpg' %}">

    <meta name="google-site-verification" content="ZCvI7uTP5Sp5HPQ1JdramodCiM_NlCLF9KReZ4cgVEI" />

    <!-- Global JSON-LD Organization Schema -->
    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Knowescape Consulting",
            "alternateName": "Knowescape",
            "url": "https://knowescape.co.za",
            "logo": "https://knowescape.co.za{% static 'knowescape/brand/favicon.png' %}",
            "description": "We're a QCTO-certified business consulting company based in Kempton Park, Johannesburg with a focus on empowering individuals and organizations through consultancy, training, and development.",
            "address": {
                "@type": "PostalAddress",
                "streetAddress": "11 Tamboti Street",
                "addressLocality": "Birchleigh, Kempton Park",
                "addressRegion": "Gauteng",
                "postalCode": "1618",
                "addressCountry": "ZA"
            },
            "areaServed": "Gauteng, South Africa"
        }
    </script>

<!-- WebSite schema to influence site name in Google Search -->
<script type="application/ld+json">
    {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Knowescape Consulting",
    "alternateName": "Knowescape",
    "url": "https://knowescape.co.za/"
    }
</script>

<!-- Placeholder for page-specific JSON-LD -->
{% block jsonld %}{% endblock %}

</head>
<body>
    {% block content %}{% endblock %}

    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

    <script src="https://unpkg.com/lenis@1.0.45/dist/lenis.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>

        // Select the element with the .has-menu class
        const menuElement = document.querySelector('.has-menu');

        // Add the click event listener to toggle the .no-display class when the menu element is clicked
        menuElement.addEventListener('click', function(event) {
            var subNav = document.querySelector('.modal-content .sub-nav-list');

            // Toggle the .no-display class
            subNav.classList.toggle('no-display');

            // If the .no-display class is removed (meaning the element is displayed), listen for clicks outside the targetElement
            if (!subNav.classList.contains('no-display')) {
                document.addEventListener('click', outsideClickListener);
            }
        });

        // Function to check for clicks outside the target element
        function outsideClickListener(event) {
            const subNav = document.querySelector('.modal-content .sub-nav-list');
            
            // Check if the click happened outside the targetElement and the menuElement
            if (!subNav.contains(event.target) && !menuElement.contains(event.target)) {
                // Add the .no-display class back
                subNav.classList.add('no-display');
                
                // Remove this event listener after the .no-display class is added
                document.removeEventListener('click', outsideClickListener);
            }
        }

        // Select the element with the .has-menu class
        const enrollElement = document.querySelector('.action-link');

        // Add the click event listener to toggle the .no-display class when the menu element is clicked
        enrollElement.addEventListener('click', function(event) {
            var enrollSubNav = document.querySelector('.modal-footer .sub-nav-list');

            // Toggle the .no-display class
            enrollSubNav.classList.toggle('no-display');

            // If the .no-display class is removed (meaning the element is displayed), listen for clicks outside the targetElement
            if (!enrollSubNav.classList.contains('no-display')) {
                document.addEventListener('click', outsideClickListener);
            }
        });

        // Function to check for clicks outside the target element
        function outsideClickListener(event) {
            const enrollSubNav = document.querySelector('.modal-footer .sub-nav-list');
            
            // Check if the click happened outside the targetElement and the menuElement
            if (!enrollSubNav.contains(event.target) && !enrollElement.contains(event.target)) {
                // Add the .no-display class back
                enrollSubNav.classList.add('no-display');
                
                // Remove this event listener after the .no-display class is added
                document.removeEventListener('click', outsideClickListener);
            }
        }
    </script>

    <!-- Lenis -->
    <script>
        const lenis = new Lenis()

        lenis.on('scroll', (e) => {
        console.log(e)
        })

        lenis.on('scroll', ScrollTrigger.update)

        gsap.ticker.add((time)=>{
        lenis.raf(time * 1000)
        })

        gsap.ticker.lagSmoothing(0)
    </script>

    {% include 'knowescape/footer.html' %}
</body>
</html>
